<nav class="bg-neutral-primary fixed w-full z-20 top-0 border-b border-default">
  <div class="max-w-8xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">

      <!-- Logo -->
      <a routerLink="/home" class="flex items-center">
        <img src="/images/freshcart-logo.svg" alt="fresh-cart-logo" class="h-8 sm:h-10" />
      </a>

      <!-- Desktop Links -->
      <ul class="hidden md:flex items-center gap-6">
        <li>
          <a routerLink="/home" routerLinkActive="active-link" [routerLinkActiveOptions]="{ exact: true }" class="nav-link font-semibold">
            Home
          </a>
        </li>
        <li>
          <a routerLink="/products" routerLinkActive="active-link" class="nav-link font-semibold">
            Products
          </a>
        </li>
        <li>
          <a routerLink="/categories" routerLinkActive="active-link" class="nav-link font-semibold">
            Categories
          </a>
        </li>
        <li>
          <a routerLink="/brands" routerLinkActive="active-link" class="nav-link font-semibold">
            Brands
          </a>
        </li>

        @if(isLoggedIn | async) {
<li>
  <button
    (click)="openCart()"
    class="relative nav-link font-semibold
          flex items-center gap-2
          transition-all duration-200
          hover:text-main-500
          hover:scale-105
          active:scale-95 cursor-pointer"
  >
    <i class="fas fa-shopping-cart text-lg"></i>

    @if ((cartService.numOfCartItems | async)) {
      <span
        class="absolute -top-1 -right-2
              bg-red-500 text-white text-xs
              rounded-full h-5 w-5
              flex items-center justify-center
              shadow-md
              animate-pulse"
      >
        {{ cartService.numOfCartItems | async }}
      </span>
    }
  </button>
</li>

          <li><a routerLink="/wishlist" routerLinkActive="active-link" class="nav-link font-semibold">Wishlist</a></li>
          <li><a routerLink="/orders" routerLinkActive="active-link" class="nav-link font-semibold">Orders</a></li>
          <li><button (click)="logOut()" class="nav-link cursor-pointer text-red-600 font-semibold">Logout</button></li>
        } @else {
          <li><a routerLink="/auth/login" routerLinkActive="active-link" class="nav-link font-semibold">Login</a></li>
          <li><a routerLink="/auth/register" routerLinkActive="active-link" class="nav-link font-semibold">Register</a></li>
        }
      </ul>

      <!-- Mobile Toggle -->
      <button
        class="md:hidden p-2 cursor-pointer rounded-lg hover:bg-neutral-secondary-soft"
        (click)="isMenuOpen = !isMenuOpen"
        aria-label="Toggle menu"
      >
        <i class="fas fa-bars text-lg"></i>
      </button>

    </div>

    <!-- Mobile Menu -->
    <div class="md:hidden transition-all duration-300" [class.hidden]="!isMenuOpen">
      <ul class="flex flex-col gap-2 py-4 border-t">
        <li><a routerLink="/home" routerLinkActive="active-link" class="mobile-link font-semibold">Home</a></li>
        <li><a routerLink="/products" routerLinkActive="active-link" class="mobile-link font-semibold">Products</a></li>
        <li><a routerLink="/categories" routerLinkActive="active-link" class="mobile-link font-semibold">Categories</a></li>
        <li><a routerLink="/brands" routerLinkActive="active-link" class="mobile-link font-semibold">Brands</a></li>

        @if(isLoggedIn | async) {
          <li><button (click)="openCart()" class="mobile-link cursor-pointer text-left font-semibold">Cart</button></li>
          <li><a routerLink="/wishlist" routerLinkActive="active-link" class="mobile-link font-semibold">Wishlist</a></li>
          <li><a routerLink="/orders" routerLinkActive="active-link" class="mobile-link font-semibold">Orders</a></li>
          <li><button (click)="logOut()" class="mobile-link cursor-pointer text-left text-red-600 font-semibold">Logout</button></li>
        } @else {
          <li><a routerLink="/auth/login" routerLinkActive="active-link" class="mobile-link font-semibold">Login</a></li>
          <li><a routerLink="/auth/register" routerLinkActive="active-link" class="mobile-link font-semibold">Register</a></li>
        }
      </ul>
    </div>
  </div>
</nav>
