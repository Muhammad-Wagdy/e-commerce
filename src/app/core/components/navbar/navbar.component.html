<nav class="bg-neutral-primary fixed w-full z-20 top-0 border-b border-default">
  <div class="max-w-7xl mx-auto px-4">

    <div class="flex items-center justify-between h-16">

      <!-- Logo -->
      <a routerLink="/home" class="flex items-center">
        <img src="/images/freshcart-logo.svg" alt="fresh-cart-logo" class="h-8" />
      </a>

      <!-- Mobile Toggle -->
      <button
        class="md:hidden p-2 rounded-lg hover:bg-neutral-secondary-soft"
        (click)="isMenuOpen = !isMenuOpen"
        aria-label="Toggle menu"
      >
        <i class="fas fa-bars text-lg"></i>
      </button>

      <!-- Desktop Links -->
      <ul class="hidden md:flex items-center gap-6 font-medium">

        <li>
          <a routerLink="/home"
             routerLinkActive="active-link"
             [routerLinkActiveOptions]="{ exact: true }"
             class="nav-link">
            Home
          </a>
        </li>

        <li>
          <a routerLink="/products" routerLinkActive="active-link" class="nav-link">
            Products
          </a>
        </li>

        <li>
          <a routerLink="/categories" routerLinkActive="active-link" class="nav-link">
            Categories
          </a>
        </li>

        <li>
          <a routerLink="/brands" routerLinkActive="active-link" class="nav-link">
            Brands
          </a>
        </li>

        @if (isLoggedIn | async) {

          <li>
            <button (click)="openCart()" class="relative nav-link">
              <i class="fas fa-shopping-cart"></i>

              @if ((cartService.numOfCartItems | async)! > 0) {
                <span
                  class="absolute -top-1 -right-2 bg-red-500 text-white text-xs
                         rounded-full h-5 w-5 flex items-center justify-center">
                  {{ cartService.numOfCartItems | async }}
                </span>
              }
            </button>
          </li>

          <li>
            <a routerLink="/wishlist" routerLinkActive="active-link" class="nav-link">
              Wishlist
            </a>
          </li>

          <li>
            <a routerLink="/orders" routerLinkActive="active-link" class="nav-link">
              Orders
            </a>
          </li>

          <li>
            <button (click)="logOut()" class="nav-link text-red-600">
              Logout
            </button>
          </li>

        } @else {

          <li>
            <a routerLink="/auth/login" routerLinkActive="active-link" class="nav-link">
              Login
            </a>
          </li>

          <li>
            <a routerLink="/auth/register" routerLinkActive="active-link" class="nav-link">
              Register
            </a>
          </li>

        }

      </ul>
    </div>

    <!-- Mobile Menu -->
    <ul
      class="md:hidden flex flex-col gap-2 py-4 border-t"
      [class.hidden]="!isMenuOpen"
    >

      <li><a routerLink="/home" routerLinkActive="active-link" class="mobile-link">Home</a></li>
      <li><a routerLink="/products" routerLinkActive="active-link" class="mobile-link">Products</a></li>
      <li><a routerLink="/categories" routerLinkActive="active-link" class="mobile-link">Categories</a></li>
      <li><a routerLink="/brands" routerLinkActive="active-link" class="mobile-link">Brands</a></li>

      @if (isLoggedIn | async) {

        <li><button (click)="openCart()" class="mobile-link text-left">Cart</button></li>
        <li><a routerLink="/wishlist" routerLinkActive="active-link" class="mobile-link">Wishlist</a></li>
        <li><a routerLink="/orders" routerLinkActive="active-link" class="mobile-link">Orders</a></li>
        <li>
          <button (click)="logOut()" class="mobile-link text-left text-red-600">
            Logout
          </button>
        </li>

      } @else {

        <li><a routerLink="/auth/login" routerLinkActive="active-link" class="mobile-link">Login</a></li>
        <li><a routerLink="/auth/register" routerLinkActive="active-link" class="mobile-link">Register</a></li>

      }

    </ul>

  </div>
</nav>
